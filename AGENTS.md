# AGENTS.md

Назначение
- Репозиторий сейчас не содержит исходного кода и метаданных сборки.
- Этот файл фиксирует найденные сигналы и задает консервативные дефолты.
- При появлении реального инструментария обновляйте этот файл немедленно.

Состояние репозитория
- Git инициализирован в корне репозитория.
- BMAD Method установлен и доступен локально.
- Нет `package.json`, `pyproject.toml`, `go.mod`, `Cargo.toml` или `Makefile`.
- Нет `.cursor/rules/`, `.cursorrules` или `.github/copilot-instructions.md`.
- На момент записи существуют `logs/`, `.opencode/` и `_bmad/`.

Политика языка
- Язык общения: русский.
- Язык документации: русский (README, инструкции, ADR, пользовательские сообщения).
- В коде идентификаторы и комментарии — по стандартам выбранного языка.
- Публичные API и сообщения об ошибках на русском, если продукт не требует иного.

Правила использования MCP
- Используйте MCP-инструменты только при необходимости и по принципу наименьших привилегий.
- Не передавайте через MCP секреты, токены, персональные данные или приватные ключи.
- Проверяйте результаты MCP-операций на корректность и воспроизводимость.
- Фиксируйте источник данных, если MCP получает внешние сведения.
- Уважайте лимиты, лицензии и условия доступа к данным.

Лучшие практики
- Делайте изменения минимальными и сфокусированными на задаче.
- Не ломайте публичные API без явного запроса пользователя.
- Добавляйте комментарии только там, где логика неочевидна.
- Избегайте магических значений — выносите в константы с понятными именами.
- Предпочитайте явное поведение неявному, особенно в обработке ошибок.
- Не добавляйте зависимости без явной необходимости.
- Соблюдайте обратную совместимость в конфигурации и форматах данных.
- Не смешивайте рефакторинг с функциональными изменениями.
- Проверяйте, что новые зависимости имеют живое сообщество и хорошую поддержку.
- Соблюдайте рекомендации по размеру файлов: стремитесь держать файлы в пределах 500–600 строк.
- Пользуйтесь Git; настройте грамотную рабочую среду для публикации в GitHub.
- Следуйте полному жизненному циклу продукта по https://github.com/bmad-code-org/BMAD-METHOD.
- Любая ошибка агента должна превращаться в правило в этом файле.
- Перед перезаписью файла обязательно читать его через Read (иначе Write завершится ошибкой).
- Не трогайте нерелевантные файлы и не делайте каскадных правок без запроса.

Практики рабочего процесса (по статье VentureBeat, 2026-01-05)
- Используйте параллельные агенты для независимых задач (тесты, рефакторинг, доки).
- Предпочитайте более надежную модель, если это снижает цену исправлений.
- Держите единый файл инструкций (этот файл) и обновляйте его при ошибках.
- Автоматизируйте рутину через команды/скрипты, если они появятся в репозитории.
- Ставьте верификацию в цикл разработки: тесты, проверки, ручная сверка UX.
- Применяйте специализированных агентов для отдельных фаз: упрощение кода, проверки, релизы.

BMAD Method (локальная установка)
- Основные артефакты и конфиги: `_bmad/`.
- Команды OpenCode: `.opencode/command/` (bmad-* сценарии).
- Агентные профили OpenCode: `.opencode/agent/`.
- Выходные артефакты BMAD по умолчанию: `_bmad-output/`.
- Используйте сценарии BMAD по назначению (аналитика, планирование, архитектура, реализация).
- Сверяйтесь с актуальными шаблонами и манифестами в `_bmad/_config/`.

Команды сборки, линтинга и тестов
- Команды не обнаружены.
- Не угадывайте команды; определяйте их по конфигам сборки при появлении.
- Если команды неизвестны — не запускайте произвольные инструменты.
- После добавления сборочной системы укажите точные команды здесь.

Запуск одного теста (пока неизвестно)
- Фреймворк тестирования не найден.
- После появления тестов зафиксируйте самые короткие команды для запуска:
  - одного файла тестов;
  - одного тест-кейса или функции.
- Примеры должны быть короткими и точными.

Чеклист поиска команд
- Проверьте файлы инструментов:
  - `package.json`, `pnpm-lock.yaml`, `yarn.lock`.
  - `pyproject.toml`, `poetry.lock`, `requirements.txt`.
  - `go.mod`, `go.sum`.
  - `Cargo.toml`, `Cargo.lock`.
  - `Makefile`, `justfile`, `Taskfile.yml`.
- Проверьте CI-конфиги, где указаны канонические команды:
  - `.github/workflows/*.yml`.
  - директории `ci/` или `scripts/`.
- Если CI есть, зеркальте команды из CI здесь.

Правила стиля кода (текущее состояние)
- Конфигурация форматирования и линтинга не обнаружена.
- Используйте стандартный стиль для выбранного языка.
- Предпочитайте простую и явную логику без избыточной магии.

Форматирование
- Если появляется форматтер, запускайте его только для затронутых файлов.
- Не форматируйте нерелевантные файлы.
- Держите длину строк разумной (цель 80–100 символов, если нет иных правил).

Импорты
- Группируйте: стандартная библиотека, сторонние, локальные.
- Сортируйте внутри групп, если инструменты не задают другое.
- Удаляйте неиспользуемые импорты при изменениях.

Именование
- Используйте понятные, говорящие имена.
- Типы/структуры/классы — существительные, функции — глаголы.
- Следуйте принятым для языка соглашениям по регистру.
- Избегайте однобуквенных имен, кроме очень локальных контекстов.

Типы и интерфейсы
- Указывайте явные типы на публичных границах.
- Не вводите интерфейсы без необходимости (минимум 2 реализации).
- Держите структуры данных рядом с местом использования.

Обработка ошибок
- Обрабатывайте ошибки явно, без молчаливых падений.
- Добавляйте полезный контекст в сообщения об ошибках.
- Не ловите слишком широкие исключения без повторного броска или логирования.

Логирование
- Если логирование добавлено, делайте его структурированным и единообразным.
- Не логируйте секреты и чувствительные данные.

Тестирование
- Добавляйте тесты при новом поведении или исправлении багов.
- Тесты должны быть детерминированными и быстрыми.
- Избегайте внешних сетевых зависимостей без моков.

Документация
- README и документы должны быть точными и краткими.
- Изменение поведения требует обновления документации.
- Не добавляйте документацию «на будущее», если она не используется.

Производительность
- Ясность важнее микрооптимизаций.
- Если производительность критична, добавляйте тест или бенчмарк.

Безопасность
- Никогда не коммитьте секреты; используйте переменные окружения.
- Не включайте секреты в примеры, логи или тестовые данные.
- Валидируйте и санитайзьте внешние входные данные.
- Проверяйте права доступа и границы доверия.

Зависимости
- Минимизируйте количество зависимостей.
- Предпочитайте поддерживаемые и широко используемые библиотеки.
- Фиксируйте версии и пересматривайте зависимости при обновлениях.

Гигиена контроля версий
- Делайте маленькие, сфокусированные изменения.
- Не смешивайте unrelated правки в одном коммите.
- Держите сообщения коммитов информативными и последовательными.

Когда обновлять AGENTS.md
- Заменяйте плейсхолдеры точными командами и правилами.
- Удаляйте неизвестные пункты после появления реальных конфигов.
- Держите файл кратким и практичным для агентов.

Приложение: плейсхолдеры для будущего инструментария
- Команда сборки: TBD
- Команда линтинга: TBD
- Команда тестов: TBD
- Запуск одного файла тестов: TBD
- Запуск одного тест-кейса: TBD
- Команда форматтера: TBD
- Команда проверки типов: TBD
- Набор CI-команд: TBD

Конец файла
