# Retrospective — Sprint 3

Дата: 2026-01-07

## Выполненные истории (2 истории, 4 SP)

**Epic 1 — Прозрачный синтез результатов**
- Story 1.4 — Статусы обработки (2 SP, Medium) ✅

**Epic 3 — Сохранение и обмен результатами**
- Story 3.2 — Экспорт с выбранными секциями (2 SP, Low) ✅

## Что пошло хорошо

1. Статусы обработки реализованы — функция `_log_status()` выводит статусы в stderr с префиксами `[status]` и маркерами ошибок `[!]`.
2. Фильтрация секций при экспорте реализована — `_export_to_file()` корректно фильтрует содержимое по флагам.
3. Экспорт в файл с предупреждением о перезаписи — проверяет существование файла и выводит предупреждение перед записью.
4. Конфигурация TTS сохранена — все параметры доступны через CLI/конфиг.
5. Авто-детект CI работает — `_is_ci_or_noninteractive()` определяет CI/неинтерактивную среду.
6. Привязка цитат к agent_id — `_extract_citations()` группирует цитаты по агентам.

## С чем столкнулись

1. Статус «Формирование цитат» не реализован полностью.
2. Статус «Сбор» не используется при загрузке JSON.
3. Нет подтверждения при перезаписи файла (только предупреждение).
4. Нет unit-тестов для статусов и фильтрации секций.

## Технический долг

| Пункт | История | Приоритет |
|--------|-----------|-----------|
| Статус «Формирование цитат» не реализован | Story 1.4 | Medium |
| Статус «Сбор» не при загрузке JSON | Story 1.4 | Low |
| Нет подтверждения при перезаписи | Story 3.2 | Low |
| Нет тестов для статусов | Story 1.4 | Medium |
| Нет тестов для фильтрации секций | Story 3.2 | Medium |

## Рекомендации

1. Добавить статус «Формирование цитат» в синтез.
2. Добавить статус «Сбор» для загрузки JSON.
3. Добавить параметр `--force` для явной перезаписи файлов.
4. Добавить тесты для статусов и фильтрации секций.

## Подготовка к следующим эпикам

**Epic 1:** Все истории завершены
**Epic 2:** Все истории завершены
**Epic 3:** Все истории завершены

## Итог

Все запланированные истории выполнены. Эпики 1, 2, 3 завершены. Проект готов к следующему этапу или финальному обзору.
