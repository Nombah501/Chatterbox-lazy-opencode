# Спринт 1 — чек-листы и тест-кейсы

## Story 1.1 — Чек-лист реализации
- Формат вывода: секции «Итог» и «Расхождения» с фиксированным порядком.
- Определить входной формат ответов агентов (минимальный контракт).
- Стабильная сортировка/слияние расхождений.
- Краткий режим по умолчанию.

## Story 1.1 — Тест-кейсы
- Несколько ответов -> секции «Итог» и «Расхождения» присутствуют.
- Один ответ -> «Расхождения» пустая/пометка о отсутствии.
- Пустой ввод -> корректное сообщение, без падения.

## Story 1.2 — Чек-лист реализации
- Модель цитат: источник, текст, связь с расхождением.
- Механизм включения/выключения цитат.
- Формат секции «Цитаты», когда источники отсутствуют.

## Story 1.2 — Тест-кейсы
- Есть цитаты -> выводятся с источниками и привязкой.
- Нет цитат -> секция «Цитаты» с явной пометкой.
- Частичные цитаты -> только для соответствующих расхождений.

## Story 2.1 — Чек-лист реализации
- Флаг/настройка конфигурации TTS.
- Дефолт: выключено или включено (явно зафиксировать).
- Сохранение состояния между запусками.

## Story 2.1 — Тест-кейсы
- Включено -> озвучка запускается.
- Выключено -> озвучка не запускается.
- Некорректная настройка -> безопасный дефолт.

## Story 2.3 — Чек-лист реализации
- Неблокирующий запуск TTS.
- Обработка ошибок, без влияния на текст.
- Понятное предупреждение пользователю.

## Story 2.3 — Тест-кейсы
- TTS недоступен -> текстовый вывод полный, есть предупреждение.
- TTS падает во время озвучки -> без падения CLI.
- Медленный TTS -> вывод текста сразу, без задержки.

## Story 2.4 — Чек-лист реализации
- Детект CI/неинтерактивной среды.
- Принудительное отключение TTS при детекте.
- Лог/сообщение о причине (кратко).

## Story 2.4 — Тест-кейсы
- В CI -> TTS не запускается.
- В интерактиве -> TTS учитывает настройку.
- Неинтерактивный запуск -> TTS выключен.

## Story 2.5 — Чек-лист реализации
- Подготовить адаптер chatterbox и выбрать режим загрузки модели (Turbo/Multilingual).
- Добавить параметры: модель, устройство, voice prompt, скорость/голос, теги.
- Реализовать CPU fallback с явным предупреждением.
- Обработать отсутствие файлов voice prompt и невалидные параметры.
- Обеспечить неблокирующий вызов озвучки.

## Story 2.5 — Тест-кейсы
- Запуск на GPU: озвучка выполняется, модель загружается один раз.
- Запуск на CPU: озвучка выполняется с предупреждением.
- Некорректный voice prompt: безопасный отказ от клон-голоса без падения.
- Парлингвистические теги проходят в текст без изменения.
- Ошибка в TTS не блокирует текстовый вывод.
