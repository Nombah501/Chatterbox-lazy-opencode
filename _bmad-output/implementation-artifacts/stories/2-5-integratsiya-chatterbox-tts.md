# Story 2.5 — Интеграция chatterbox TTS

- Epic: 2 — Озвучка и управление TTS
- Priority: High
- Estimate: 5 SP
- Status: review

## Краткое описание
Использовать chatterbox как основной TTS-движок с полным функционалом.

## Ценность
Высокое качество озвучки, голос-клон, теги, выбор моделей.

## Критерии приемки
- Поддерживается Turbo и Multilingual режимы через конфиг или флаг.
- Поддерживается voice prompt (референсный аудиофайл).
- Поддерживаются парлингвистические теги в тексте.
- При отсутствии GPU есть CPU fallback с предупреждением.
- Ошибки TTS не блокируют текстовый вывод.

## Чек-лист реализации
- Подготовить адаптер chatterbox и выбрать режим загрузки модели (Turbo/Multilingual).
- Добавить параметры: модель, устройство, voice prompt, скорость/голос, теги.
- Реализовать CPU fallback с явным предупреждением.
- Обработать отсутствие файлов voice prompt и невалидные параметры.
- Обеспечить неблокирующий вызов озвучки.

## Конфигурация TTS (chatterbox)
```yaml
tts:
  enabled: false
  engine: "chatterbox"
  model: "turbo" # turbo | multilingual
  device: "auto" # auto | cuda | cpu
  voice_prompt_path: ""
  voice: "default"
  speed: 1.0
  tags_enabled: true
```

## Тест-кейсы
- Запуск на GPU: озвучка выполняется, модель загружается один раз.
- Запуск на CPU: озвучка выполняется с предупреждением.
- Некорректный voice prompt: безопасный отказ от клон-голоса без падения.
- Парлингвистические теги проходят в текст без изменения.
- Ошибка в TTS не блокирует текстовый вывод.

## Зависимости
- Story 2.1 (включение/выключение TTS).
- Story 2.2 (настройка голоса и скорости).
- Story 2.3 (fallback при ошибках).
- Story 2.4 (детект CI/неинтерактива).

## Ссылки
- https://github.com/resemble-ai/chatterbox
- `_bmad-output/planning-artifacts/epics-user-stories.md` (Story 2.5)
